# WebAuthn Fingerprint Test

–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–æ—Ç–ø–µ—á–∞—Ç–∫–∏ –ø–∞–ª—å—Ü–µ–≤, Face ID) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º WebAuthn API.

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è WebAuthn –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –±–µ–∑ –ª–æ–≥–∏–Ω–æ–≤ –∏ –ø–∞—Ä–æ–ª–µ–π.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–¢–æ–ª—å–∫–æ –±–∏–æ–º–µ—Ç—Ä–∏—è** - –±–µ–∑ –ª–æ–≥–∏–Ω–æ–≤, –ø–∞—Ä–æ–ª–µ–π, email
- ‚úÖ **–¢–æ–ª—å–∫–æ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ—Å–∫—Ç–æ–ø–æ–≤
- ‚úÖ **–ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –º–∏–Ω–∏–º—É–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** - –ª–µ–≥–∫–∏–π –∑–∞–ø—É—Å–∫
- ‚úÖ **jQuery + PHP** - –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥
- ‚úÖ **HTTPS —á–µ—Ä–µ–∑ tuna** - –≥–æ—Ç–æ–≤–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
/root/otpechatokv2/
‚îú‚îÄ‚îÄ docker/                    # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ apache/000-default.conf   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Apache
‚îÇ   ‚îî‚îÄ‚îÄ mysql/init.sql            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ public/                    # –í–µ–±-—Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.php                 # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
‚îÇ   ‚îú‚îÄ‚îÄ webauthn.html            # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WebAuthn
‚îÇ   ‚îú‚îÄ‚îÄ api.php                  # REST API backend
‚îÇ   ‚îî‚îÄ‚îÄ styles.css               # –°—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ src/                      # PHP –∫–ª–∞—Å—Å—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ Database.php             # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ DeviceDetector.php       # –î–µ—Ç–µ–∫—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
‚îú‚îÄ‚îÄ Dockerfile                # –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ docker-compose.yml        # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ composer.json             # PHP –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

**Windows (WSL2):**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Desktop
# –°–∫–∞—á–∞–π—Ç–µ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞: https://www.docker.com/products/docker-desktop/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
docker --version
docker-compose --version
```

**Linux (Ubuntu/Debian):**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo apt-get update
sudo apt-get install docker-compose-plugin

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER
newgrp docker
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Tuna (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è HTTPS)

**Windows:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ winget
winget install --id yuccastream.tuna

# –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å GitHub:
# https://github.com/yuccastream/tuna/releases
```

**Linux/macOS:**
```bash
# –°–∫–∞—á–∞–π—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –≤–µ—Ä—Å–∏—é
curl -L -o tuna https://github.com/yuccastream/tuna/releases/download/v1.0.0/tuna-linux-amd64
chmod +x tuna
sudo mv tuna /usr/local/bin/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
tuna --version
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tuna

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞** https://tuna.am
2. **–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω** –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω**:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_TOKEN –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
tuna config save-token YOUR_TOKEN

# –ü—Ä–∏–º–µ—Ä:
# tuna config save-token tt_abc123def456ghi789jkl012mno345pqr
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

#### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
git clone <your-repo-url>
cd otpechatokv2

# –ò–ª–∏ –µ—Å–ª–∏ —É–∂–µ —Å–∫–∞—á–∞–Ω
cd /path/to/otpechatokv2
```

#### –ó–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# otpechatokv2-web-1  apache2-foreground  Up  0.0.0.0:8080->80/tcp
# otpechatokv2-db-1   mysqld              Up  3306/tcp
```

#### –ó–∞–ø—É—Å–∫ HTTPS —Ç—É–Ω–Ω–µ–ª—è
```bash
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ tuna
tuna http 8080

# –í—ã —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# INFO[12:53:54] Welcome to Tuna
# INFO[12:53:55] Account: your-email@domain.com (Free)
# INFO[12:53:56] Forwarding https://abc123-178-208-235-88.ru.tuna.am -> 127.0.0.1:8080
```

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

#### –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º
1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ HTTPS —Å—Å—ã–ª–∫—É** –∏–∑ –≤—ã–≤–æ–¥–∞ tuna (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123-178-208-235-88.ru.tuna.am`)
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ iPhone –∏–ª–∏ Android** (–≤ Safari –∏–ª–∏ Chrome)
3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω–∞ –±–∏–æ–º–µ—Ç—Ä–∏—è** (Touch ID, Face ID, Fingerprint)

#### –ü—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** - –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**:
   - –ù–∞–∂–º–∏—Ç–µ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" 
   - –ö–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø—Ä–æ—Å –±–∏–æ–º–µ—Ç—Ä–∏–∏ - –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!"
3. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**:
   - –ù–∞–∂–º–∏—Ç–µ "–í—Ö–æ–¥"
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –±–∏–æ–º–µ—Ç—Ä–∏—é
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!"

### –®–∞–≥ 5: –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –õ–æ–≥–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
docker-compose logs -f web

# –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö  
docker-compose logs -f db

# –õ–æ–≥–∏ Apache (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
docker-compose exec web tail -f /var/log/apache2/error.log
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL
docker-compose exec db mysql -u webauthn_user -p webauthn_db

# –ü–∞—Ä–æ–ª—å: webauthn_pass

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
SHOW TABLES;
SELECT * FROM users;
SELECT * FROM user_credentials;
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ tuna
```bash
# –õ–æ–≥–∏ tuna –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã:
# INFO[13:33:04] GET /webauthn.html ‚Äì 200 OK
# INFO[13:33:12] POST /api.php ‚Äì 200 OK
```

### –®–∞–≥ 6: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes (–æ—á–∏—Å—Ç–∫–∞ –ë–î)
docker-compose down -v
```

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ tuna
```bash
# Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å tuna –∏–ª–∏
pkill tuna
```

## üì± –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

- **iOS**: iPhone/iPad —Å Touch ID –∏–ª–∏ Face ID
- **Android**: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –æ—Ç–ø–µ—á–∞—Ç–∫–æ–º –ø–∞–ª—å—Ü–∞ (Android 6.0+)

## üõ†Ô∏è API Endpoints

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/api.php?action=device-info` | GET | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ |
| `/api.php?action=register-options` | POST | –û–ø—Ü–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ WebAuthn |
| `/api.php?action=register-verify` | POST | –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ |
| `/api.php?action=auth-options` | POST | –û–ø—Ü–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `/api.php?action=auth-verify` | POST | –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `/api.php?action=logout` | POST | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã |
| `/api.php?action=status` | GET | –°—Ç–∞—Ç—É—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ |

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã MySQL:

- **`users`** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (ID + handle)
- **`user_credentials`** - WebAuthn —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **`user_sessions`** - –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

- **Host**: `db` (–≤–Ω—É—Ç—Ä–∏ Docker)
- **Database**: `webauthn_db`
- **User**: `webauthn_user`
- **Password**: `webauthn_pass`

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f web

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose restart web

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker-compose exec db mysql -u webauthn_user -p webauthn_db

# –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
docker-compose down -v
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ WebAuthn –ø–æ–¥–¥–µ—Ä–∂–∫–∏:

```javascript
console.log('WebAuthn support:', !!window.PublicKeyCredential);
```

### üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞: "Device not supported"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ User-Agent –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
# –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools ‚Üí Console
console.log(navigator.userAgent);

# –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å iPhone, iPad –∏–ª–∏ Android
```

#### –ü—Ä–æ–±–ª–µ–º–∞: Tuna –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
tuna config show

# 2. –û–±–Ω–æ–≤–∏—Ç–µ tuna
winget upgrade yuccastream.tuna

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 8080
netstat -an | grep 8080
```

#### –ü—Ä–æ–±–ª–µ–º–∞: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ —Å—Ç–∞—Ä—Ç—É—é—Ç
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker
docker --version
docker-compose --version

# 2. –û—Å–≤–æ–±–æ–¥–∏—Ç–µ –ø–æ—Ä—Ç 8080
docker ps | grep 8080
docker stop $(docker ps -q --filter "expose=8080")

# 3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down -v
docker-compose up -d --build
```

#### –ü—Ä–æ–±–ª–µ–º–∞: "WebAuthn not supported"
**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **HTTPS** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
- ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ **–º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Chrome** –∏–ª–∏ **Safari**
- ‚ùå **HTTP –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è** WebAuthn

#### –ü—Ä–æ–±–ª–µ–º–∞: "Challenge mismatch"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ —Å–µ—Å—Å–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools ‚Üí Application ‚Üí Storage ‚Üí Clear storage

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose restart web
```

#### –ü—Ä–æ–±–ª–µ–º–∞: "Credential not found"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
docker-compose exec db mysql -u webauthn_user -pwebauthn_pass webauthn_db -e "
DELETE FROM user_credentials; 
DELETE FROM users; 
DELETE FROM user_sessions;"

# –ü–µ—Ä–µ—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∑–∞–Ω–æ–≤–æ
```

### üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

#### –õ–æ–≥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```javascript
// –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools ‚Üí Console
// –í–∫–ª—é—á–∏—Ç–µ –≤—Å–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–æ–≤ (Verbose)

// –ü—Ä–æ–≤–µ—Ä–∫–∞ WebAuthn –ø–æ–¥–¥–µ—Ä–∂–∫–∏
console.log('WebAuthn support:', !!window.PublicKeyCredential);
console.log('Platform authenticator:', 
  await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable());
```

#### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: Docker –ª–æ–≥–∏
docker-compose logs -f web

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: Apache –ª–æ–≥–∏  
docker-compose exec web tail -f /var/log/apache2/error.log

# –¢–µ—Ä–º–∏–Ω–∞–ª 3: Tuna –ª–æ–≥–∏
tuna http 8080
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ API –≤—Ä—É—á–Ω—É—é
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ device-info
curl "https://your-tuna-link.ru.tuna.am/api.php?action=device-info"

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å device –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –û–∂–∏–¥–∞–µ–º—ã–µ –≤—Ä–µ–º–µ–Ω–∞ –æ—Ç–≤–µ—Ç–∞
- **GET –∑–∞–ø—Ä–æ—Å—ã**: < 100ms
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: 2-5 —Å–µ–∫—É–Ω–¥ (–≤–∫–ª—é—á–∞—è –±–∏–æ–º–µ—Ç—Ä–∏—é)
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: 1-3 —Å–µ–∫—É–Ω–¥—ã (–≤–∫–ª—é—á–∞—è –±–∏–æ–º–µ—Ç—Ä–∏—é)

#### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–±–ª–µ–º
- ‚ö†Ô∏è **HTTP 500** - –ø—Ä–æ–±–ª–µ–º—ã —Å PHP/MySQL
- ‚ö†Ô∏è **HTTP 403** - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É  
- ‚ö†Ô∏è **Timeout** - –ø—Ä–æ–±–ª–µ–º—ã —Å tuna/Docker

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï**: –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç!

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- –ü–æ–ª–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è WebAuthn
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ CBOR/COSE –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–Ω—ã–µ HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
- –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF/XSS –∞—Ç–∞–∫

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Frontend**: HTML5, jQuery 3.7.1, CSS3
- **Backend**: PHP 8.2, MySQL 8.0
- **WebAuthn**: –ù–∞—Ç–∏–≤–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π API
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker, Docker Compose
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä**: Apache 2.4
- **–¢—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: Tuna –¥–ª—è HTTPS

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `docker-compose up -d` –∏ `tuna http 8080`, –∑–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.